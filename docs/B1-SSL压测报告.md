# B1-SSL 压测报告（历史归档）

> 本文档保留压测细节和历史对照数据。当前摘要与建议请优先看 [05-性能分析](05-性能分析.md)。

## 测试概述

- 项目：`galay-ssl`
- 工具：`B1-SslBenchServer` / `B1-SslBenchClient`
- 模型：SSL Echo（发送后回显）
- 记录日期：2026-02-13（含 5 轮串行复测）

## 环境（归档记录）

### 硬件

- CPU：Apple M4
- 核心数：10
- 内存：24 GB
- 架构：ARM64

### 软件

- 操作系统：macOS 15.7.3
- 编译器：Apple Clang 17
- C++：23
- OpenSSL：3.5.0
- 调度器：KqueueScheduler

### 构建口径

```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DENABLE_LTO=ON
cmake --build build -j
```

## 参数说明

客户端命令：

```bash
./build/bin/B1-SslBenchClient <host> <port> <connections> <requests_per_conn> [payload_bytes] [threads] [connect_retries]
```

- `payload_bytes` 默认 `47`
- `threads` 默认 `1`
- `connect_retries` 默认 `3`

## 最新归档数据（2026-02-13）

### 小包场景（47B）

参数：`200 500 47 4`

| 指标 | 数值 |
|------|------|
| 完成请求 | 100,000 |
| 错误数 | 0 |
| 耗时 | 616.4 ms（615 / 619） |
| QPS | 162,234（161,551 / 162,602） |
| 吞吐量 | 14.54 MB/s（14.48 / 14.58） |

### 大包场景（64KiB）

参数：`10 200 65536 1`

| 指标 | 数值 |
|------|------|
| 完成请求 | 2,000 |
| 错误数 | 0 |
| 耗时 | 126.2 ms（125 / 128） |
| QPS | 15,849（15,625 / 16,000） |
| 吞吐量 | 1,981.10 MB/s（1,953.12 / 2,000.00） |

## 大 payload 补充记录

### 64KiB，50 连接，200 请求

| 完成请求 | 错误数 | 耗时(ms) | 吞吐量(MB/s) |
|---------|-------|---------|-------------|
| 10,000 | 0 | 36,174 | 34.56 |

### 1MiB 正确性检查（1 连接，1 请求）

| 完成请求 | 错误数 | 耗时(ms) |
|---------|-------|---------|
| 1 | 0 | 98 |

## 历史对照（已停更）

曾保留 `OpenSSL + libevent` 对照程序。该程序已从仓库移除，以下数据仅作历史基线，不再更新。

### 小包对照（47B）

| 框架 | QPS | 吞吐量(MB/s) | 错误数 |
|------|-----|-------------|-------|
| galay-ssl | 162,234（5轮平均） | 14.54（5轮平均） | 0 |
| OpenSSL + libevent | 178,891（单次） | 16.04（单次） | 0 |

### 大包对照（64KiB）

| 框架 | QPS | 吞吐量(MB/s) | 错误数 |
|------|-----|-------------|-------|
| galay-ssl | 15,849（5轮平均） | 1,981.10（5轮平均） | 0 |
| OpenSSL + libevent | 19,417（单次） | 2,427.18（单次） | 0 |

## 结论（归档版）

1. 当前归档基线下，核心场景可稳定跑通且错误数为 0。
2. 小包与大包表现均已进入可比较状态，可继续做定向优化。
3. 历史对照仅用于趋势追踪，不应与当前多轮统计直接等价比较。

## 关联文档

- [05-性能分析](05-性能分析.md)
- [T1-SSL测试结果](T1-SSL测试结果.md)
